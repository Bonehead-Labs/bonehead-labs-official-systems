[gd_scene load_steps=9 format=3]

[ext_resource type="Script" path="res://EnemyAI/EnemyBaseV2.gd" id="1_base"]
[ext_resource type="Script" path="res://systems/fsm/StateMachine.gd" id="2_fsm"]
[ext_resource type="Script" path="res://Combat/HealthComponent.gd" id="3_health"]
[ext_resource type="Script" path="res://Combat/HurtboxComponent.gd" id="4_hurtbox"]
[ext_resource type="Script" path="res://Combat/HitboxComponent.gd" id="5_hitbox"]
[ext_resource type="Texture2D" path="res://icon.svg" id="6_icon"]

[sub_resource type="CircleShape2D" id="CircleShape2D_perception"]
radius = 200.0

[sub_resource type="RectangleShape2D" id="RectangleShape2D_hurtbox"]
size = Vector2(48, 48)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_hitbox"]
size = Vector2(24, 24)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_body"]
size = Vector2(48, 48)

[node name="BaseEnemy" type="CharacterBody2D"]
script = ExtResource("1_base")
# Exported NodePaths wiring
sprite_path = NodePath("Sprite2D")
animated_sprite_path = NodePath("AnimatedSprite2D")
perception_area_path = NodePath("PerceptionArea")
state_machine_path = NodePath("StateMachine")
health_component_path = NodePath("HealthComponent")
hurtbox_path = NodePath("HurtboxComponent")
hitbox_path = NodePath("HitboxComponent")
initial_state = "idle"

[node name="Sprite2D" type="Sprite2D" parent="."]
texture = ExtResource("6_icon")
modulate = Color(0.5, 0, 0.5, 1)
scale = Vector2(0.5, 0.5)

[node name="CollisionShape2D" type="CollisionShape2D" parent="."]
shape = SubResource("RectangleShape2D_body")

[node name="AnimatedSprite2D" type="AnimatedSprite2D" parent="."]

[node name="PerceptionArea" type="Area2D" parent="."]
monitoring = true
monitorable = false

[node name="CollisionShape2D" type="CollisionShape2D" parent="PerceptionArea"]
shape = SubResource("CircleShape2D_perception")

[node name="StateMachine" type="Node" parent="."]
script = ExtResource("2_fsm")

[node name="HealthComponent" type="Node" parent="."]
script = ExtResource("3_health")
max_health = 100.0
auto_register_with_save_service = false

[node name="HurtboxComponent" type="Area2D" parent="."]
script = ExtResource("4_hurtbox")
health_component_path = NodePath("../HealthComponent")
faction = "enemy"
friendly_fire = false

[node name="CollisionShape2D" type="CollisionShape2D" parent="HurtboxComponent"]
shape = SubResource("RectangleShape2D_hurtbox")

[node name="HitboxComponent" type="Area2D" parent="."]
script = ExtResource("5_hitbox")
faction = "enemy"
damage_amount = 10.0
auto_activate = false

[node name="CollisionShape2D" type="CollisionShape2D" parent="HitboxComponent"]
shape = SubResource("RectangleShape2D_hitbox")


